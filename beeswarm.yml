test_name: 'lulesh-run'
time_log: 'time-log-lulesh-openmp.txt'
email: jtronge@kent.edu
name: 'Jake Tronge'
beeswarm_repo_owner: jtronge
beeswarm_repo: BeeSwarm
wfm_port: 8020
tm_port: 7866
bee_branch: 'beeswarm'
ctr_archive: '${HOME}/.beeflow/container_archive'
# LULESH scaling tests (numRanks needs to be number of nodes)
# numRanks * nx * nx * nx
# 0: 1 * 60 * 60 * 60
# 1: (2 * 2 * 2) * 30 * 30 * 30 = 8 * 30 * 30 * 30
# 2: (6 * 6 * 6) * 10 * 10 * 10 = 216 * 10 * 10 * 10
scale_tests:
  - name: 'lulesh-openmp-2-core'
    wfl_dir: './workflows/lulesh-mpi'
    # Workflow params
    params:
      container: 'jtronge/lulesh:openmp'
      ntasks: 1
      nodelist: bee-node0
    template_files: ['lulesh.cwl']
    main_cwl: 'lulesh.cwl'
    # yaml: 'lulesh.yml'
    inputs:
      size: 60
      iterations: 600
    container:
      ctx_dir: 'containers/lulesh'
      name: 'lulesh:openmp'
      remote: 'jtronge/lulesh:openmp'
      build_args:
        WITH_OPENMP: TRUE
  - name: 'lulesh-openmp-4-core'
    wfl_dir: './workflows/lulesh-mpi'
    # Workflow params
    params:
      container: 'jtronge/lulesh:openmp'
      ntasks: 1
      nodelist: bee-node1
    template_files: ['lulesh.cwl']
    main_cwl: 'lulesh.cwl'
    # yaml: 'lulesh.yml'
    inputs:
      size: 60
      iterations: 600
    container:
      ctx_dir: 'containers/lulesh'
      name: 'lulesh:openmp'
      remote: 'jtronge/lulesh:openmp'
      build_args:
        WITH_OPENMP: TRUE
  - name: 'lulesh-openmp-8-core'
    wfl_dir: './workflows/lulesh-mpi'
    # Workflow params
    params:
      container: 'jtronge/lulesh:openmp'
      ntasks: 1
      nodelist: bee-node2
    template_files: ['lulesh.cwl']
    main_cwl: 'lulesh.cwl'
    # yaml: 'lulesh.yml'
    inputs:
      size: 60
      iterations: 600
    container:
      ctx_dir: 'containers/lulesh'
      name: 'lulesh:openmp'
      remote: 'jtronge/lulesh:openmp'
      build_args:
        WITH_OPENMP: TRUE
  - name: 'lulesh-openmp-16-core'
    wfl_dir: './workflows/lulesh-mpi'
    # Workflow params
    params:
      container: 'jtronge/lulesh:openmp'
      ntasks: 1
      nodelist: bee-node3
    template_files: ['lulesh.cwl']
    main_cwl: 'lulesh.cwl'
    # yaml: 'lulesh.yml'
    inputs:
      size: 60
      iterations: 600
    container:
      ctx_dir: 'containers/lulesh'
      name: 'lulesh:openmp'
      remote: 'jtronge/lulesh:openmp'
      build_args:
        WITH_OPENMP: TRUE
private_key_data: ${PRIVATE_KEY_DATA}
private_key_path: '${HOME}/key'
private_key_data: ${PRIVATE_KEY_DATA}
private_key_path: '${HOME}/key'
cloud_conf_path: '$HOME/cloud.yml'
